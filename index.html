<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Essay Writing Scorer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .stat-box {
            background-color: #f8f9fa;
            padding: 1em;
            border-radius: 8px;
            margin-bottom: 1em;
        }
        .feedback-section {
            display: none;
            background-color: #fff3cd;
            padding: 1em;
            border-radius: 8px;
            margin-top: 1em;
        }
        .error-highlight {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <h1 class="text-center mb-4">Essay Writing Scorer</h1>
    
    <!-- Timer Section -->
    <div class="text-center mb-4">
        <strong>Time Remaining:</strong> <span id="timer">5:00</span>
    </div>

    <!-- Essay Prompt Section -->
    <div id="essay-prompt" class="alert alert-primary text-center">
        <strong>Prompt:</strong> <span id="prompt-text">Loading...</span>
    </div>
    
    <!-- Writing Area -->
    <textarea id="essay-input" class="form-control mb-3" rows="8" placeholder="Start typing your essay here..."></textarea>
    
    <!-- Real-Time Stats -->
    <div class="row">
        <div class="col-md-3">
            <div class="stat-box text-center">
                <h5>Spelling Mistakes</h5>
                <p id="spelling-errors">0</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-box text-center">
                <h5>Grammar Mistakes</h5>
                <p id="grammar-errors">0</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-box text-center">
                <h5>Backspace Count</h5>
                <p id="backspace-count">0</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-box text-center">
                <h5>Total Score</h5>
                <p id="total-score">100</p>
            </div>
        </div>
    </div>
    
    <!-- Submit Button -->
    <div class="text-center mt-4">
        <button id="new-prompt" class="btn btn-primary">Get New Prompt</button>
        <button id="submit-essay" class="btn btn-success">Submit Essay</button>
    </div>
    
    <!-- Feedback Section -->
    <div id="feedback-section" class="feedback-section">
        <h4>Submission Feedback</h4>
        <p><strong>Spelling Mistakes:</strong> <span id="feedback-spelling-errors">0</span></p>
        <p><strong>Grammar Mistakes:</strong> <span id="feedback-grammar-errors">0</span></p>
        <p><strong>Your Essay with Highlights:</strong></p>
        <div id="feedback-essay" style="white-space: pre-wrap;"></div>
        <h5>Suggested Corrections:</h5>
        <ul id="corrections-list"></ul>
    </div>
</div>

<script>
    const prompts = [
        "Describe your favorite vacation spot.",
        "What would you do if you were the president?",
        "Explain a skill you would like to learn.",
        "Write about a memorable childhood event.",
        "The Impact of Social Media on Youth",
        "Advantages and Disadvantages of Online Learning",
        "Importance of Teamwork in the Workplace",
        "How Technology Has Changed Communication",
        "Benefits of a Healthy Work-Life Balance",
        "Role of Artificial Intelligence in Daily Life",
        "How to Manage Time Effectively",
        "Importance of Cybersecurity in Today's World",
        "Pros and Cons of Working from Home",
        "Environmental Impact of Plastic Usage",
        "The Role of Social Responsibility in Business",
        "Is Online Shopping Better Than Traditional Shopping?",
        "Effects of Climate Change on Modern Society",
        "Pros and Cons of Electric Vehicles",
        "The Importance of Digital Literacy in Today's World",
        "How Social Media Affects Mental Health",
        "The Future of Work: Automation and Jobs",
        "Impact of the Internet on Education",
        "Challenges of Urbanization in Developing Countries",
        "How Technology is Transforming Healthcare",
        "Role of Government in Reducing Pollution",
        "Importance of Financial Literacy for Young Adults",
        "The Growing Popularity of Freelancing",
        "Benefits and Drawbacks of Social Networking Sites",
        "How to Achieve Success in a Competitive World",
        "The Influence of Sports on Youth Development",
        "Should Education be Free for Everyone?",
        "Cyberbullying: Causes and Prevention",
        "Impact of Globalization on Local Culture",
        "How Artificial Intelligence is Shaping the Future"
    ];
    let currentPrompt = "";
    let backspaceCount = 0;
    let spellingErrors = 0;
    let grammarErrors = 0;
    let totalScore = 100;
    let timerInterval;

    const dictionary = {
        "vacation": "vacation",
        "president": "president",
        "skill": "skill",
        "learn": "learn",
        "memorable": "memorable",
        "childhood": "childhood",
        "event": "event",
        // Add more words for spell-checking
    };

    function getNewPrompt() {
        currentPrompt = prompts[Math.floor(Math.random() * prompts.length)];
        document.getElementById('prompt-text').innerText = currentPrompt;
        resetStats();
    }

    function resetStats() {
        document.getElementById('essay-input').value = "";
        document.getElementById('feedback-section').style.display = 'none';
        backspaceCount = 0;
        spellingErrors = 0;
        grammarErrors = 0;
        totalScore = 100;
        updateDisplay();
        startTimer(5); // Set timer to 5 minutes
    }

    function updateDisplay() {
        document.getElementById('backspace-count').innerText = backspaceCount;
        document.getElementById('spelling-errors').innerText = spellingErrors;
        document.getElementById('grammar-errors').innerText = grammarErrors;
        document.getElementById('total-score').innerText = Math.max(totalScore, 0); // Ensure score is non-negative
    }

    function calculateScore() {
        const essay = document.getElementById('essay-input').value;
        const words = essay.split(/\s+/);
        
        spellingErrors = words.filter(word => !dictionary[word.toLowerCase()] && word).length;
        grammarErrors = Math.floor(spellingErrors / 3); // Simplistic grammar error estimate
        totalScore = Math.max(100 - (spellingErrors + grammarErrors * 2 + backspaceCount * 0.5), 0); // Non-negative score
        
        updateDisplay();
    }

    function highlightErrors(text) {
        const words = text.split(/\s+/);
        return words.map(word => {
            if (!dictionary[word.toLowerCase()]) {
                return `<span class="error-highlight">${word}</span>`;
            }
            return word;
        }).join(' ');
    }

    function getCorrections(text) {
        const words = text.split(/\s+/);
        const corrections = [];

        words.forEach(word => {
            const lowerWord = word.toLowerCase();
            if (!dictionary[lowerWord] && word) {
                // Simulate a correction suggestion by replacing with correct word (or close match)
                const suggestedCorrection = dictionary[lowerWord] || `suggested correction for "${word}"`;
                corrections.push(`${word} -> ${suggestedCorrection}`);
            }
        });
        
        return corrections;
    }

    function startTimer(minutes) {
        clearInterval(timerInterval);
        let timeRemaining = minutes * 60;
        
        timerInterval = setInterval(() => {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').innerText = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeRemaining <= 0) {
                clearInterval(timerInterval);
                alert("Time's up!");
                document.getElementById('submit-essay').click();
            }
            
            timeRemaining--;
        }, 1000);
    }

    document.getElementById('essay-input').addEventListener('input', (event) => {
        if (event.inputType === 'deleteContentBackward') {
            backspaceCount++;
        }
        calculateScore();
    });

    document.getElementById('new-prompt').addEventListener('click', getNewPrompt);

    document.getElementById('submit-essay').addEventListener('click', () => {
        const essay = document.getElementById('essay-input').value;
        const wordCount = essay.split(/\s+/).filter(word => word).length;
        
        if (wordCount < 200) {
            alert("Your essay must be at least 200 words.");
            return;
        }
        
        document.getElementById('feedback-section').style.display = 'block';
        document.getElementById('feedback-spelling-errors').innerText = spellingErrors;
        document.getElementById('feedback-grammar-errors').innerText = grammarErrors;
        document.getElementById('feedback-essay').innerHTML = highlightErrors(essay); // Show highlighted errors

        // Display correction suggestions
        const corrections = getCorrections(essay);
        const correctionsList = document.getElementById('corrections-list');
        correctionsList.innerHTML = "";
        corrections.forEach(correction => {
            const li = document.createElement("li");
            li.innerText = correction;
            correctionsList.appendChild(li);
        });
    });

    window.onload = getNewPrompt;
</script>

</body>
</html>
